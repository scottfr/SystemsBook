[{"title": "Agent Movement", "description": "This model illustrates the use of movement within an agent based models. We adapt the model so that healthy agents run away from the nearest infected agent."},{"load": "<mxGraphModel>  <root>    <mxCell id=\"0\"\/>    <mxCell id=\"1\" parent=\"0\"\/>    <Folder name=\"Person\" Note=\"\" Type=\"Agent\" Image=\"None\" FlipHorizontal=\"false\" FlipVertical=\"false\" LabelPosition=\"Middle\" id=\"28\">      <mxCell style=\"folder\" parent=\"1\" vertex=\"1\">        <mxGeometry x=\"450\" y=\"100\" width=\"140\" height=\"320\" as=\"geometry\"\/>      <\/mxCell>    <\/Folder>    <State name=\"Healthy\" Note=\"\" Active=\"Index([Self]) &lt;&gt; 1\" Image=\"None\" FlipHorizontal=\"false\" FlipVertical=\"false\" LabelPosition=\"Middle\" id=\"23\">      <mxCell style=\"state\" parent=\"28\" vertex=\"1\">        <mxGeometry x=\"20\" y=\"20\" width=\"100\" height=\"40\" as=\"geometry\"\/>      <\/mxCell>    <\/State>    <State name=\"Infected\" Note=\"\" Active=\"Index([Self]) == 1\" Image=\"None\" FlipHorizontal=\"false\" FlipVertical=\"false\" LabelPosition=\"Middle\" id=\"24\">      <mxCell style=\"state\" parent=\"28\" vertex=\"1\">        <mxGeometry x=\"20\" y=\"140\" width=\"100\" height=\"40\" as=\"geometry\"\/>      <\/mxCell>    <\/State>    <State name=\"Recovered\" Note=\"\" Active=\"false\" Image=\"None\" FlipHorizontal=\"false\" FlipVertical=\"false\" LabelPosition=\"Middle\" id=\"25\">      <mxCell style=\"state\" parent=\"28\" vertex=\"1\">        <mxGeometry x=\"20\" y=\"260\" width=\"100\" height=\"40\" as=\"geometry\"\/>      <\/mxCell>    <\/State>    <Transition name=\"Infection\" Note=\"\" Trigger=\"Probability\" Value=\"[Fraction Infected]\" Units=\"Unitless\" MaxConstraintUsed=\"false\" MinConstraintUsed=\"false\" MaxConstraint=\"100\" MinConstraint=\"0\" ShowSlider=\"false\" SliderMax=\"100\" SliderMin=\"0\" SliderStep=\"\" id=\"26\">      <mxCell style=\"transition\" parent=\"28\" source=\"23\" target=\"24\" edge=\"1\">        <mxGeometry x=\"-450\" y=\"-100\" width=\"100\" height=\"100\" as=\"geometry\">          <mxPoint x=\"-450\" as=\"sourcePoint\"\/>          <mxPoint x=\"-350\" y=\"-100\" as=\"targetPoint\"\/>        <\/mxGeometry>      <\/mxCell>    <\/Transition>    <Transition name=\"Recovery\" Note=\"\" Trigger=\"Probability\" Value=\"0.2\" Units=\"Unitless\" MaxConstraintUsed=\"false\" MinConstraintUsed=\"false\" MaxConstraint=\"100\" MinConstraint=\"0\" ShowSlider=\"false\" SliderMax=\"100\" SliderMin=\"0\" SliderStep=\"\" id=\"27\">      <mxCell style=\"transition\" parent=\"28\" source=\"24\" target=\"25\" edge=\"1\">        <mxGeometry x=\"-450\" y=\"-100\" width=\"100\" height=\"100\" as=\"geometry\">          <mxPoint x=\"-450\" as=\"sourcePoint\"\/>          <mxPoint x=\"-350\" y=\"-100\" as=\"targetPoint\"\/>        <\/mxGeometry>      <\/mxCell>    <\/Transition>    <Setting Note=\"\" Version=\"28\" TimeLength=\"20\" TimeStart=\"0\" TimeStep=\"1\" TimeUnits=\"Years\" StrictUnits=\"true\" Units=\"\" HiddenUIGroups=\"Validation,User Interface\" SolutionAlgorithm=\"RK1\" BackgroundColor=\"white\" Throttle=\"1\" Macros=\"\" SensitivityPrimitives=\"\" SensitivityRuns=\"50\" SensitivityBounds=\"50, 80, 95, 100\" SensitivityShowRuns=\"false\" id=\"2\">      <mxCell parent=\"1\" vertex=\"1\" visible=\"0\">        <mxGeometry x=\"20\" y=\"20\" width=\"80\" height=\"40\" as=\"geometry\"\/>      <\/mxCell>    <\/Setting>    <Display name=\"Default Display\" Note=\"\" Type=\"Time Series\" xAxis=\"Time (%u)\" yAxis=\"\" ThreeDimensional=\"false\" Primitives=\"23,24,25,29,30\" AutoAddPrimitives=\"true\" ScatterplotOrder=\"X Primitive, Y Primitive\" Image=\"Display\" yAxis2=\"\" Primitives2=\"\" showMarkers=\"false\" showLines=\"true\" showArea=\"false\" legendPosition=\"Automatic\" id=\"3\">      <mxCell style=\"roundImage;image=\/builder\/images\/DisplayFull.png;\" parent=\"1\" vertex=\"1\" visible=\"0\">        <mxGeometry x=\"50\" y=\"20\" width=\"64\" height=\"64\" as=\"geometry\"\/>      <\/mxCell>    <\/Display>    <Agents name=\"Population\" Note=\"\" Size=\"50\" GeoWrap=\"false\" GeoDimUnits=\"Unitless\" GeoWidth=\"200\" GeoHeight=\"100\" Placement=\"Random\" PlacementFunction=\"&lt;&lt;rand*width([Self]), rand*height([Self])&gt;&gt;\" Network=\"None\" NetworkFunction=\"randBoolean(0.02)\" Agent=\"28\" Image=\"None\" FlipHorizontal=\"false\" FlipVertical=\"false\" LabelPosition=\"Middle\" id=\"29\">      <mxCell style=\"agents\" parent=\"1\" vertex=\"1\">        <mxGeometry x=\"220\" y=\"180\" width=\"170\" height=\"80\" as=\"geometry\"\/>      <\/mxCell>    <\/Agents>    <Variable name=\"Fraction Infected\" Note=\"\" Equation=\"Count(FindState([Population], [Infected]))\/PopulationSize([Population])\" Units=\"Unitless\" MaxConstraintUsed=\"false\" MinConstraintUsed=\"false\" MaxConstraint=\"100\" MinConstraint=\"0\" ShowSlider=\"false\" SliderMax=\"100\" SliderMin=\"0\" SliderStep=\"\" Image=\"None\" FlipHorizontal=\"false\" FlipVertical=\"false\" LabelPosition=\"Middle\" id=\"30\">      <mxCell style=\"variable\" vertex=\"1\" parent=\"1\">        <mxGeometry x=\"280\" y=\"90\" width=\"130\" height=\"50\" as=\"geometry\"\/>      <\/mxCell>    <\/Variable>    <Link name=\"Link\" Note=\"\" BiDirectional=\"false\" id=\"31\">      <mxCell style=\"link\" edge=\"1\" parent=\"1\" source=\"29\" target=\"30\">        <mxGeometry width=\"100\" height=\"100\" as=\"geometry\">          <mxPoint y=\"100\" as=\"sourcePoint\"\/>          <mxPoint x=\"100\" as=\"targetPoint\"\/>        <\/mxGeometry>      <\/mxCell>    <\/Link>    <Link name=\"Link\" Note=\"\" BiDirectional=\"false\" id=\"32\">      <mxCell style=\"link\" edge=\"1\" parent=\"1\" source=\"30\" target=\"26\">        <mxGeometry width=\"100\" height=\"100\" as=\"geometry\">          <mxPoint y=\"100\" as=\"sourcePoint\"\/>          <mxPoint x=\"100\" as=\"targetPoint\"\/>        <\/mxGeometry>      <\/mxCell>    <\/Link>  <\/root><\/mxGraphModel>"},"DIAGRAM","We will extend our model from earlier by adding movement to the agents. First we need to create an action primitive.",{"target":"Person","geometry":{"x":450,"y":100,"width":250,"height":320}},{"geometry":{"x":120,"y":190,"width":120,"height":50},"create":"Action", "name":"Escape"},{"parent": "Person", "name": "Escape"},{"geometry":{"x":0,"y":0,"width":100,"height":100}, "alpha":"Healthy","omega":"Escape", "create": "Link"},{"geometry":{"x":0,"y":0,"width":100,"height":100},"alpha":"Population","omega":"Escape","create":"Link"},"DIAGRAM","We will have this action be triggered when the agent it is in is healthy and there is at least on infected agent in the simulation.",{"attribute":"Value","target":"Escape","value":"[Healthy] and Count(FindState([Population], [Infected])) > 0"},"The action will cause healthy agents to move away from the nearest infected agent.",{"attribute":"Action","target":"Escape","value":"MoveTowards([Self], FindNearest(FindState([Population], [Infected]), [Self]), -2)", "editor": true},"We can now run the simulation.",{"attribute":"Primitives","target":"DISPLAY","value":["Population"]},"RESULTS","These results look the same as before. To see the agents moving we need to change the display type to *Map* and then we can run the simulation again.",{"attribute":"Type","target":"DISPLAY","value":"Map"},"RESULTS"]