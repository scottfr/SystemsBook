<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/><Setting unfolding="{&quot;children&quot;:[{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;We start by importing our historical population data into a converter primitive. In this illustrative example we have twenty years of data with a census of the hamster population being carried out every two years. We run the model to see what this historical data looks like.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nvar newPrimitive = createPrimitive(\'Historical Hamsters\', \'Converter\', [270, 150], [120, 50]);\\n\\ngraph.fit(5);\\n\\n\\n\\nfindName(\'Historical Hamsters\').setAttribute(\'Data\', \'0, 22; 2, 49; 4, 40; 6, 61; 8, 100; 10, 104; 12, 153; 14, 243; 16, 236; 18, 370; 20, 560\');\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;There is a lot of variability and the population even declines some years. However, it looks like in general the rate of growth increases as the population size increases. This is what we would expect to see with exponential growth. Let\'s build a simple exponential growth model to attempt to replicate what we see with the historical data.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nrunModel();\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;That\'s the structure of our model. Now we can fill in the equations. We\'ll set the initial population size for our simulated hamster population to be the same as for the historical data.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nvar newPrimitive = createPrimitive(\'Hamsters\', \'Stock\', [480, 260], [100, 40]);\\n\\ngraph.fit(5);\\n\\n\\n\\nvar cell =createConnector(\'Net Population Growth\', \'Flow\', null, findName(\'Hamsters\'));\\nvar geo = new mxGeometry(0, 0, 100, 100);\\ngeo.setTerminalPoint(new mxPoint(530, 120), true);\\ngeo.setTerminalPoint(new mxPoint(0, 100), false);\\ngraph.model.execute(new mxGeometryChange(graph.model, cell, geo));\\n\\ngraph.fit(5);\\n\\n\\n\\nvar newPrimitive = createPrimitive(\'Net Growth Rate\', \'Variable\', [620, 105], [120, 50]);\\n\\ngraph.fit(5);\\n\\n\\n\\nvar cell =createConnector(\'Link\', \'Link\', findName(\'Net Growth Rate\'), findName(\'Net Population Growth\'));\\nvar geo = new mxGeometry(0, 0, 100, 100);\\ngraph.model.execute(new mxGeometryChange(graph.model, cell, geo));\\n\\ngraph.fit(5);\\n\\n\\n\\nvar cell =createConnector(\'Link\', \'Link\', findName(\'Historical Hamsters\'), findName(\'Hamsters\'));\\nvar geo = new mxGeometry(0, 0, 100, 100);\\ngraph.model.execute(new mxGeometryChange(graph.model, cell, geo));\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;What growth rate should we begin with? We do not have any data on this. Let\'s experiment by starting with 10% per year and see what we end up.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nfindName(\'Hamsters\').setAttribute(\'InitialValue\', \'[Historical Hamsters]\');\\n\\ngraph.fit(5);\\n\\n\\n\\nfindName(\'Net Population Growth\').setAttribute(\'FlowRate\', \'[Hamsters]*[Net Growth Rate]\');\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;That does not look too great. Our simulated population is much smaller than the historical values. Let\'s try a larger growth rate, say 30%.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nfindName(\'Net Growth Rate\').setAttribute(\'Equation\', \'0.1\');\\n\\ngraph.fit(5);\\n\\n\\n\\nfindType(\'Display\')[0].setAttribute(\'Primitives\', getID(findName([\'Hamsters\',\'Historical Hamsters\'])).join(\',\'));\\n\\ngraph.fit(5);\\n\\n\\n\\nrunModel();\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;That\'s not good either, now our population is too large! We could keep experimenting with different growth rates to find a good one, but that might take a while. Let\'s just let the optimizer do the work for us. First we need to create a primitive to hold the error. We will use the squared error measure we discussed earlier.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nfindName(\'Net Growth Rate\').setAttribute(\'Equation\', \'0.3\');\\n\\ngraph.fit(5);\\n\\n\\n\\nrunModel();\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;There, we have set up what we need for the optimizer to work. Now we can run the optimizer. We set the &lt;b&gt;Goal Primitive&lt;/b&gt; to &lt;span class=\'primitive\'&gt;Squared Error&lt;/span&gt; and the &lt;b&gt;Primitive to Change&lt;/b&gt; to &lt;span class=\'primitive\'&gt;Net Growth Rate&lt;/span&gt;. We tell the optimizer to minimize the integral of the error and set the optimizer to work.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nvar newPrimitive = createPrimitive(\'Squared Error\', \'Variable\', [330, 330], [120, 50]);\\n\\ngraph.fit(5);\\n\\n\\n\\nvar cell =createConnector(\'Link\', \'Link\', findName(\'Hamsters\'), findName(\'Squared Error\'));\\nvar geo = new mxGeometry(0, 0, 100, 100);\\ngraph.model.execute(new mxGeometryChange(graph.model, cell, geo));\\n\\ngraph.fit(5);\\n\\n\\n\\nvar cell =createConnector(\'Link\', \'Link\', findName(\'Historical Hamsters\'), findName(\'Squared Error\'));\\nvar geo = new mxGeometry(0, 0, 100, 100);\\ngraph.model.execute(new mxGeometryChange(graph.model, cell, geo));\\n\\ngraph.fit(5);\\n\\n\\n\\nfindName(\'Squared Error\').setAttribute(\'Equation\', \'([Hamsters]-[Historical Hamsters])^2\');\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;note&quot;,&quot;data&quot;:&quot;The optimizer gets our results almost instantly: 0.172 or 17.2% is the optimal growth rate. When we run the model with this value the results look great. It\'s an almost perfect match between the historical and simulated data.&quot;,&quot;text&quot;:&quot;Show Message&quot;,&quot;leaf&quot;:true},{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;graph.fit(5);&quot;,&quot;text&quot;:&quot;Refit model&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;},{&quot;children&quot;:[{&quot;type&quot;:&quot;action&quot;,&quot;data&quot;:&quot;\\n\\nfindName(\'Net Growth Rate\').setAttribute(\'Equation\', \'0.172\');\\n\\ngraph.fit(5);\\n\\n\\n\\nfindType(\'Display\')[0].setAttribute(\'Primitives\', getID(findName([\'Hamsters\',\'Historical Hamsters\'])).join(\',\'));\\n\\ngraph.fit(5);\\n\\n\\n\\nrunModel();\\n\\ngraph.fit(5);\\n\\n&quot;,&quot;text&quot;:&quot;Run Action&quot;,&quot;leaf&quot;:true}],&quot;type&quot;:&quot;group&quot;,&quot;text&quot;:&quot;New Group&quot;}],&quot;text&quot;:&quot;Root Node&quot;}" unfoldingStatus="on" unfoldingAuto="always" Note="" Version="28" TimeLength="20" TimeStart="0" TimeStep="1" TimeUnits="Years" StrictUnits="true" Units="" HiddenUIGroups="Validation,User Interface" SolutionAlgorithm="RK1" BackgroundColor="white" Throttle="1" Macros="" SensitivityPrimitives="" SensitivityRuns="50" SensitivityBounds="50, 80, 95, 100" SensitivityShowRuns="false" id="2"><mxCell parent="1" vertex="1" visible="0"><mxGeometry x="20" y="20" width="80" height="40" as="geometry"/></mxCell></Setting><Display name="Default Display" Note="" Type="Time Series" xAxis="Time (%u)" yAxis="" ThreeDimensional="false" Primitives="" AutoAddPrimitives="true" ScatterplotOrder="X Primitive, Y Primitive" Image="Display" yAxis2="" Primitives2="" showMarkers="false" showLines="true" showArea="false" legendPosition="Automatic" id="3"><mxCell style="roundImage;image=/builder/images/DisplayFull.png;" parent="1" vertex="1" visible="0"> <mxGeometry x="50" y="20" width="64" height="64" as="geometry"/></mxCell></Display></root></mxGraphModel>